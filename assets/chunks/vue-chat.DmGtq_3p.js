import{d as H,h as I,$ as Z,q as z,C as L,c as d,o as n,j as T,G as C,N as E,n as f,k as o,r as h,b as x,e as S,w as _,a as M,t as A,ad as pe,ae as ye,T as ee,p as N,x as me,D as ae,F as R,H as W,v as be,P as ne,B as P,ap as ke,K as ve,s as ge}from"./framework.D9FL8Ram.js";import{o as he,l as _e,i as $e,j as we,k as Ce,E as xe,m as Ne,n as Te,q as Be}from"./theme.3LBv4ZxA.js";function Ve(s,u,l,t,e){let i=`${s}-${u}`;return l&&(i+=`-${l}`),i}function q(s){const u="Vc";return{namespace:u,b:(l="")=>Ve(u,s,l)}}const Se=["src"],Re=H({__name:"Welcome",props:{classNames:{},description:{},extra:{},icon:{},rootClassName:{},styles:{},title:{},variant:{default:"filled"},directions:{}},setup(s){const u=s,l=q("welcome"),t=I(()=>[u.rootClassName,{[l.b("filled")]:u.variant==="filled",[l.b("borderless")]:u.variant==="borderless",[l.b("left")]:u.directions==="left",[l.b("right")]:u.directions==="right"}]);return(e,i)=>{var c,y,k,$,v,w,a,g;return n(),d("div",{class:f([o(l).b(),t.value])},[e.$slots.icon||e.icon?(n(),d("div",{key:0,class:f([o(l).b("icon"),(c=e.classNames)==null?void 0:c.icon]),style:E((y=e.styles)==null?void 0:y.icon)},[h(e.$slots,"icon",{},()=>[typeof e.icon=="string"?(n(),d("img",{key:0,src:e.icon,alt:"欢迎图标"},null,8,Se)):(n(),x(W(e.icon),{key:1}))],!0)],6)):S("",!0),T("div",{class:f(o(l).b("content-wrapper"))},[e.$slots.title||e.title?(n(),d("div",{key:0,class:f([o(l).b("title"),(k=e.classNames)==null?void 0:k.title,(e.$slots.extra||e.extra)&&"extra"]),style:E(($=e.styles)==null?void 0:$.title)},[h(e.$slots,"title",{},()=>[T("h4",null,A(e.title),1)],!0),e.$slots.extra||e.extra?(n(),d("div",{key:0,class:f([o(l).b("extra"),(v=e.classNames)==null?void 0:v.extra]),style:E((w=e.styles)==null?void 0:w.extra)},[h(e.$slots,"extra",{},()=>[M(A(e.extra),1)],!0)],6)):S("",!0)],6)):S("",!0),T("span",{class:f([o(l).b("description"),(a=e.classNames)==null?void 0:a.description]),style:E((g=e.styles)==null?void 0:g.description)},[h(e.$slots,"description",{},()=>[M(A(e.description),1)],!0)],6)],2)],2)}}}),F=(s,u)=>{const l=s.__vccOpts||s;for(const[t,e]of u)l[t]=e;return l},oe=F(Re,[["__scopeId","data-v-f9b19b9d"]]);oe.install=s=>{s.component("Welcome",oe)};const Ee=["disabled"],Ie=H({__name:"Thinking",props:{content:{default:""},modelValue:{type:Boolean,default:!0},status:{default:"start"},autoCollapse:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},duration:{default:"0.2s"},buttonWidth:{default:"160px"},maxWidth:{default:"500px"},backgroundColor:{},color:{default:"#00"},isBorder:{type:Boolean,default:!1},lb:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(s,{emit:u}){const l=q("thinking"),t=s,e=I(()=>t.status==="start"?"开始思考":t.status==="thinking"?"思考中":t.status==="end"?"思考完成":"思考失败"),i=u,c=Z(),y=I({get(){return t.modelValue},set(a){i("update:modelValue",a)}}),k=()=>{y.value=!y.value,i("change",!y.value,t.status)},$=I(()=>{const a={};return t.buttonWidth&&(a.width=t.buttonWidth),t.isBorder&&(a.border="1px solid var(--border-color)"),a}),v=I(()=>{const a={};return t.maxWidth&&(a.maxWidth=t.maxWidth),t.backgroundColor&&(t.backgroundColor.includes("linear-gradient")?a.background=t.backgroundColor:a.backgroundColor=t.backgroundColor),t.color&&(a.color=t.color),a}),w=I(()=>({transition:t.duration?`transform ${t.duration} ease`:"transform $motion-duration-slow ease"}));return z(()=>t.status,a=>{t.autoCollapse&&a==="end"&&(y.value=!1,console.log("isOpen.value",y.value))}),z(()=>y.value,a=>{console.log("Watch isOpen.value",a)}),(a,g)=>{const m=L("el-icon");return n(),d("div",{class:f(o(l).b())},[T("div",null,[T("button",{class:f(o(l).b("top")),disabled:a.disabled,style:E($.value),onClick:k},[T("span",{class:f(o(l).b("icon"))},[h(a.$slots,"icon",{status:a.status},()=>[a.status==="start"?(n(),x(m,{key:0,style:{color:"var(--start-color)"}},{default:_(()=>[C(o(he))]),_:1})):a.status==="thinking"?(n(),x(m,{key:1,style:{color:"var(--thinking-color)"},class:"thinking-loading"},{default:_(()=>[C(o(_e))]),_:1})):a.status==="end"?(n(),x(m,{key:2,style:{color:"var(--end-color)"}},{default:_(()=>[C(o($e))]),_:1})):a.status==="error"?(n(),x(m,{key:3,style:{color:"var(--error-color)"}},{default:_(()=>[C(o(we))]),_:1})):S("",!0)],!0)],2),T("span",{class:f(o(l).b("label"))},[h(a.$slots,"label",{status:a.status},()=>[M(A(e.value),1)],!0)],2),T("span",{class:f([o(l).b("arrow"),{"is-open":y.value}]),style:E(w.value)},[h(a.$slots,"arrow",{},()=>[C(m,{class:"el-icon-center"},{default:_(()=>[C(o(Ce))]),_:1})],!0)],6)],14,Ee)]),C(ee,{name:"thinking-content"},{default:_(()=>[pe(T("div",{class:f([o(l).b("content"),{[o(l).b("content-lb")]:a.lb}]),style:E(v.value)},[o(c).error&&a.status==="error"?h(a.$slots,"error",{key:0},void 0,!0):h(a.$slots,"content",{key:1,status:a.status,content:a.content},()=>[M(A(a.content),1)],!0)],6),[[ye,y.value]])]),_:3})],2)}}}),se=F(Ie,[["__scopeId","data-v-144544e5"]]);se.install=s=>{s.component("Thinking",se)};function De(s){return I(()=>{if(!s)return[!1,0,0];let u={step:1,interval:50};return typeof s=="object"&&(u={...u,...s}),[!0,u.interval,u.step]}).value}const ie=s=>typeof s=="string",Le=(s,u,l,t)=>{let e=N(""),i=N(1);const c=N(u&&ie(s.value));z(()=>s.value,()=>{console.log(s.value),console.log(e.value),!c.value&&ie(s.value)?i.value=s.value.length:c.value&&s.value.indexOf(e.value)!==0&&(i.value=1),e.value=s.value}),ge(()=>{if(c.value&&i.value<s.value.length){const $=setTimeout(()=>{const v=w=>w+l;i.value=v(i.value)},t);return()=>clearTimeout($)}});const y=I(()=>c.value&&i.value<s.value.length?()=>s.value.slice(0,i.value):()=>s.value),k=I(()=>c.value&&i.value<s.value.length);return[y,k]},Oe={},Ke={class:"vk-wapper-dot"},He={key:"item-1",class:f("vk-wapper-dot-item")},Fe={key:"item-2",class:f("vk-wapper-dot-item")},We={key:"item-3",class:f("vk-wapper-dot-item")};function Ae(s,u){return n(),d("span",Ke,[(n(),d("i",He)),(n(),d("i",Fe)),(n(),d("i",We))])}const re=F(Oe,[["render",Ae],["__scopeId","data-v-88aadeec"]]),je=["innerHTML"],ze=["innerHTML"],Me=H({inheritAttrs:!1,__name:"Bubble",props:{avatar:{default:""},className:{},content:{default:""},loading:{type:Boolean,default:!1},loadingRender:{type:Function,default:void 0},messageRender:{},placement:{default:"start"},shape:{},styles:{},typing:{type:[Boolean,Object],default:!1},variant:{default:"filled"},transparent:{type:Boolean,default:!1}},emits:["onTypingComplete","onUpdate"],setup(s,{expose:u,emit:l}){const t=s;console.log("bubble props",t);const e=l,i=q("bubble"),c=Z();console.log("bubble slots",c);const y=N(),k=I(()=>t.content),[$,v,w]=De(t.typing),[a,g]=Le(k,$,w,v);console.log("typedContent.value",a.value);const m=I(()=>{var r;return t.messageRender?t.messageRender(((r=a.value)==null?void 0:r.call(a))??""):a.value});function B(r){return typeof r=="string"}const b=N(!1);return z(()=>g.value||t.loading,()=>{!g.value&&!t.loading?b.value||(b.value=!0,e("onTypingComplete")):b.value=!1}),z(()=>a.value(),()=>e("onUpdate")),u({nativeElement:y}),(r,V)=>{var p,D,O,K,j,U,J,Q,X,Y,G,le;const fe=L("el-avatar");return n(),d("div",{ref_key:"divRef",ref:y,class:f([o(i).b(),o(i).b(r.placement)])},[r.avatar||o(c).avatar?(n(),d("div",{key:0,class:f([o(i).b("avatar"),(p=t.className)==null?void 0:p.avatar]),style:E((D=t.styles)==null?void 0:D.avatar)},[h(r.$slots,"avatar",{},()=>[typeof r.avatar=="string"?(n(),x(fe,{key:0,size:32,src:r.avatar},null,8,["src"])):(n(),x(W(r.avatar),{key:1}))],!0)],6)):S("",!0),o(c).header||o(c).footer?(n(),d("div",{key:1,class:f([o(i).b("content-wrapper")])},[o(c).header?(n(),d("div",{key:0,class:f([o(i).b("header"),(O=t.className)==null?void 0:O.header]),style:E((K=t.styles)==null?void 0:K.header)},[h(r.$slots,"header",{},void 0,!0)],6)):S("",!0),T("div",{class:f([o(i).b("content"),o(i).b(`content-${t.variant}`),(j=t.className)==null?void 0:j.content,t.shape&&o(i).b(`content-${t.placement}-${t.shape}`),{[o(i).b("content-filled-transparent")]:t.transparent}]),style:E((U=t.styles)==null?void 0:U.content)},[t.loading?(n(),d(R,{key:0},[o(c).loading?h(r.$slots,"loading",{key:0},void 0,!0):r.loadingRender?(n(),x(W(r.loadingRender()),{key:1})):(n(),x(re,{key:2}))],64)):S("",!0),t.loading?S("",!0):(n(),d(R,{key:1},[o(c).content?(n(),d(R,{key:0},[o(c).content?h(r.$slots,"content",{key:0},void 0,!0):S("",!0)],64)):(n(),d(R,{key:1},[B(m.value)?(n(),d("div",{key:1,innerHTML:m.value},null,8,je)):(n(),x(W(m.value),{key:0}))],64))],64))],6),o(c).footer?(n(),d("div",{key:1,class:f([o(i).b("footer"),(J=t.className)==null?void 0:J.footer]),style:E((Q=t.styles)==null?void 0:Q.footer)},[h(r.$slots,"footer",{},void 0,!0)],6)):S("",!0)],2)):(n(),d(R,{key:2},[T("div",{class:f([o(i).b("content"),o(i).b(`content-${t.variant}`),(X=t.className)==null?void 0:X.content,t.shape&&o(i).b(`content-${t.placement}-${t.shape}`),{[o(i).b("content-filled-transparent")]:t.transparent}]),style:E((Y=t.styles)==null?void 0:Y.content)},[t.loading?(n(),d(R,{key:0},[o(c).loading?h(r.$slots,"loading",{key:0},void 0,!0):r.loadingRender?(n(),x(W(r.loadingRender()),{key:1})):(n(),x(re,{key:2}))],64)):S("",!0),t.loading?S("",!0):(n(),d(R,{key:1},[o(c).content?(n(),d(R,{key:0},[o(c).content?h(r.$slots,"content",{key:0},void 0,!0):S("",!0)],64)):(n(),d(R,{key:1},[B(m.value)?(n(),d("div",{key:1,innerHTML:m.value},null,8,ze)):(n(),x(W(m.value),{key:0}))],64))],64))],6),o(c).footer?(n(),d("div",{key:0,class:f([o(i).b("footer"),(G=t.className)==null?void 0:G.footer]),style:E((le=t.styles)==null?void 0:le.footer)},[h(r.$slots,"footer",{},void 0,!0)],6)):S("",!0)],64))],2)}}}),qe=F(Me,[["__scopeId","data-v-354cdaa2"]]),Ge=H({__name:"BubbleList",props:{autoScroll:{type:Boolean,default:!0},className:{},items:{default:()=>[]},rootClassName:{}},setup(s,{expose:u}){const l=s;console.log("bubblelist props",l);const t=N(),e=N(0),i=N({}),c=Z(),y=q("bubble-list"),k=N(!1),$=N(1),v=N(!0),w=b=>{const r=b.target;k.value=r.scrollHeight-Math.abs(r.scrollTop)-r.clientHeight<=$.value},a=(b,r)=>{r!=null&&(b?Reflect.set(i.value,r,b):Reflect.deleteProperty(i.value,r))};z(()=>e.value,()=>{l.autoScroll&&t.value&&k.value&&t.value.scrollTo({top:t.value.scrollHeight,behavior:"smooth"})});function g(){l.autoScroll&&(e.value=e.value+1)}z(()=>l.items.length,()=>{ne(()=>{l.autoScroll&&(e.value+=1,k.value=!0)})});const m=b=>{var r;b.key&&((r=b==null?void 0:b.onTypingComplete)==null||r.call(b))},B=({key:b,offset:r,behavior:V="smooth",block:p})=>{var D;if(typeof r=="number")(D=t.value)==null||D.scrollTo({top:r,behavior:V});else if(b!==void 0){const O=i.value[l.items[b].key];if(O){const K=l.items.findIndex(j=>j.key===`persit_${b}`);console.log("index",K,l.items),k.value=K===l.items.length-1,O.$el.scrollIntoView({behavior:V,block:p})}}};return be(()=>{ne(()=>{B({offset:t.value.scrollHeight,behavior:"auto"})})}),u({nativeElement:t.value,scrollTo:B}),(b,r)=>(n(),d("div",{ref_key:"listRef",ref:t,class:f([o(y).b(),b.rootClassName,b.className,k.value?o(y).b("reach-end"):""]),onScroll:w},[(n(!0),d(R,null,P(l.items,V=>(n(),x(qe,ve({key:V.key,ref_for:!0},V,{onOnUpdate:g,ref_for:!0,ref:p=>a(p,V.key),"on-typing-complete":()=>m(V),typing:v.value?V.typing:!1}),ke({_:2},[P(c,(p,D)=>({name:D,fn:_(()=>[h(b.$slots,D,{info:V},void 0,!0)])}))]),1040,["on-typing-complete","typing"]))),128))],34))}}),ut=F(Ge,[["__scopeId","data-v-4e30e9cd"]]);function Pe(s,u=[]){const l=I(()=>{if(!s)return[!1,void 0,void 0];let t={sort:void 0,title:void 0};return typeof s=="object"&&(t={...t,...s}),[!0,t.sort,t.title]});return console.log(l.value),I(()=>{const t=l.value[0];if(!t)return[[{name:"unGroup",data:u,title:void 0}],t];const e=u.reduce((i,c)=>{const y=c.group||"unGroup";return i[y]||(i[y]=[]),i[y].push(c),i},{});return[(l.value[1]&&typeof l.value[1]!="boolean"?Object.keys(e).sort(l.value[1]):Object.keys(e)).map(i=>({name:i==="unGroup"?void 0:i,data:e[i],title:l.value[2]})),l.value[0]]}).value}const Ue=H({props:{vNode:{type:[String,Object],require:!0}},setup(s){return()=>s.vNode}}),Je=H({__name:"Dropdown",props:{placement:{},trigger:{},disabled:{type:Boolean,default:!1},menu:{default:()=>[]}},emits:["onOpenChange"],setup(s,{emit:u}){const l=s,t=u;return(e,i)=>(n(),x(o(Be),{onVisibleChange:i[0]||(i[0]=c=>t("onOpenChange",c))},{dropdown:_(()=>[C(o(Ne),null,{default:_(()=>[(n(!0),d(R,null,P(l.menu,(c,y)=>(n(),x(o(Te),ve({key:y,ref_for:!0},c),{default:_(()=>[M(A(c.label),1)]),_:2},1040))),128))]),_:1})]),default:_(()=>[h(e.$slots,"default")]),_:3}))}}),Qe=H({__name:"ConversationItem",props:{direction:{},className:{},active:{type:Boolean},info:{},menu:{},inEllipsis:{type:Boolean,default:!0},line:{default:1}},emits:["click"],setup(s,{emit:u}){const l=s,t=u,e=N(!1),i=I(()=>{var a,g;return[l.className,w.b("item"),{[w.b("item-active")]:l.active&&!((a=l.info)!=null&&a.disabled)},{[w.b("item-disabled")]:(g=l.info)==null?void 0:g.disabled}]}),c=()=>{var a;(a=l.info)!=null&&a.disabled||t("click",l.info)},y=()=>{var a,g,m,B,b;if((a=l.info)!=null&&a.disabled){e.value=!1;return}v.value&&(e.value=((g=v.value)==null?void 0:g.scrollWidth)>((m=v.value)==null?void 0:m.offsetWidth)||((B=v.value)==null?void 0:B.scrollHeight)>((b=v.value)==null?void 0:b.offsetHeight))},k=a=>{var g,m;Array.isArray(l.menu)||l.info&&((m=(g=l.menu)==null?void 0:g.onClick)==null||m.call(g,{...l.info,key:a}))},$=a=>{a.stopPropagation()},v=N(),w=q("conversations");return(a,g)=>{var m;const B=L("el-icon"),b=L("More"),r=L("ElIcon"),V=L("ElButton"),p=L("el-tooltip");return n(),x(p,{visible:e.value,"onUpdate:visible":g[0]||(g[0]=D=>e.value=D),content:(m=a.info)==null?void 0:m.label,disabled:a.inEllipsis&&!e.value,placement:a.direction==="ltr"?"left":"right"},{default:_(()=>{var D,O;return[T("li",{class:f(i.value),onClick:c},[h(a.$slots,"icon",{class:"icon"},()=>[a.info.icon?(n(),d("div",{key:0,class:f(o(w).b("icon"))},[typeof a.info.icon=="string"?(n(),x(B,{key:0},{default:_(()=>[(n(),x(W(a.info.icon)))]),_:1})):(n(),x(W(a.info.icon),{key:1}))],2)):S("",!0)],!0),T("div",{ref_key:"textRef",ref:v,class:f(o(w).b("label")),style:E({textOverflow:"ellipsis","-webkit-line-clamp":a.line}),onMouseenter:y},[h(a.$slots,"label",{item:a.info},()=>[M(A(a.info.label),1)],!0)],38),a.menu&&!((D=a.info)!=null&&D.disabled)?(n(),x(Je,{key:0,disabled:(O=a.info)==null?void 0:O.disabled,menu:Array.isArray(a.menu)?a.menu:a.menu.items,placement:a.direction==="rtl"?"bottom-start":"bottom-end",trigger:"click",onCommand:k},{default:_(()=>{var K;return[C(V,{disabled:(K=a.info)==null?void 0:K.disabled,link:"",onClick:$},{default:_(()=>[C(r,{class:f(o(w).b("menu-icon"))},{default:_(()=>[C(b)]),_:1},8,["class"])]),_:1},8,["disabled"])]}),_:1},8,["disabled","menu","placement"])):S("",!0)],2)]}),_:3},8,["visible","content","disabled","placement"])}}}),ue=F(Qe,[["__scopeId","data-v-2b5b7ab3"]]),Xe=H({__name:"Conversation",props:{style:{},className:{},direction:{},groupable:{type:[Boolean,Object]},items:{},activeKey:{},defaultActiveKey:{},onActiveChange:{type:Function},classNames:{},styles:{},menu:{type:[Function,Array]}},emits:["update:activeKey"],setup(s,{emit:u}){const l=s,t=u,e=q("conversations"),i=I(()=>l.activeKey||l.defaultActiveKey||"");console.log(l.items);const[c,y]=Pe(l.groupable,l.items);console.log(c,y);const k=I(()=>[e.b(),l.className,{[e.b("rtl")]:l.direction==="rtl"}]);function $(v){l.onActiveChange&&l.onActiveChange(v.key)===!1||t("update:activeKey",v.key)}return(v,w)=>(n(),d("ul",{class:f(k.value),style:E(l.style)},[(n(!0),d(R,null,P(o(c),(a,g)=>(n(),d(R,{key:g},[o(y)?(n(),d(R,{key:0},[(n(),d("li",{key:a.name||`key-${g}`},[a.title?(n(),x(o(Ue),{key:0,vNode:a.title},null,8,["vNode"])):(n(),d(R,{key:1},[M(A(a.name),1)],64))])),T("ul",{class:f([o(e).b("list")])},[(n(!0),d(R,null,P(a.data,(m,B)=>{var b,r;return n(),x(ue,{key:m.key||`key-${B}`,active:i.value===m.key,"class-name":(b=l.classNames)==null?void 0:b.item,direction:l.direction,info:m,menu:typeof l.menu=="function"?l.menu(m):l.menu,style:E((r=l.styles)==null?void 0:r.item),onClick:$},{label:_(({item:V})=>[h(v.$slots,"item",{item:V},void 0,!0)]),icon:_(()=>[h(v.$slots,"icon",{},void 0,!0)]),_:2},1032,["active","class-name","direction","info","menu","style"])}),128))],2)],64)):(n(!0),d(R,{key:1},P(a.data,(m,B)=>{var b,r;return n(),x(ue,{key:m.key||`key-${B}`,active:i.value===m.key,"class-name":(b=l.classNames)==null?void 0:b.item,direction:l.direction,info:m,menu:typeof l.menu=="function"?l.menu(m):l.menu,style:E((r=l.styles)==null?void 0:r.item),onClick:$},{label:_(({item:V})=>[h(v.$slots,"item",{item:V},void 0,!0)]),icon:_(()=>[h(v.$slots,"icon",{},void 0,!0)]),_:2},1032,["active","class-name","direction","info","menu","style"])}),128))],64))),128))],6))}}),dt=F(Xe,[["__scopeId","data-v-2078bce4"]]),Ye={},Ze={color:"currentColor",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"};function et(s,u){return n(),d("svg",Ze,u[0]||(u[0]=[T("title",null,"停止",-1),T("rect",{fill:"currentColor",height:"250",rx:"24",ry:"24",width:"250",x:"375",y:"375"},null,-1),T("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor","stroke-width":"100",opacity:"0.45"},null,-1),T("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor","stroke-width":"100","stroke-dasharray":"600 9999999"},[T("animateTransform",{attributeName:"transform",dur:"1s",from:"0 500 500",repeatCount:"indefinite",to:"360 500 500",type:"rotate"})],-1)]))}const de=F(Ye,[["render",et]]),tt={class:"foo"},lt=H({__name:"Sender",props:{modelValue:{},className:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},rootClassName:{},styles:{},loading:{type:Boolean},variants:{default:"default"},submitType:{default:"enter"},onInput:{},onSubmit:{}},emits:["update:modelValue","on-input","on-submit"],setup(s,{expose:u,emit:l}){const t=q("sender"),e=s,i=N(),c=N(!1),y=N(),k=N(),$=N(!1),v=l,w=Z(),a=I(()=>{var p;return[t.b("input"),(p=e==null?void 0:e.className)==null?void 0:p.input]}),g=I(()=>[t.b("container"),{[t.b("default")]:e.variants==="default",[t.b("updown")]:e.variants==="updown"}]);function m(p){v("update:modelValue",p)}const B=p=>{v("on-input",p)},b=p=>{v("on-submit",p)},r=I({get:()=>e.modelValue,set:p=>m(p)}),V=p=>{if(e.submitType==="enter"&&!(e!=null&&e.loading)&&p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),b(e.modelValue)),e.submitType==="shiftEnter"){if(p.key==="Enter"&&!p.shiftKey&&!(e!=null&&e.loading))return;p.key==="Enter"&&p.shiftKey&&(p.preventDefault(),b(e.modelValue))}};return u({handleHeaderClose:()=>{c.value=!1},handleHeaderOpen:()=>{c.value=!0},handleFocusDefault:()=>{var p;(p=y.value)==null||p.focus()},handleFocusupDown:()=>{var p;(p=k.value)==null||p.focus()},handleFooterClose:()=>{$.value=!1},handleFooterOpen:()=>{$.value=!0},handleInputSubmit:()=>{r.value&&b(r.value)},handleInputClear:()=>{r.value=""}}),(p,D)=>{var O,K;const j=L("el-input"),U=L("ElIcon"),J=L("ElButton"),Q=L("Promotion"),X=L("el-icon"),Y=L("el-button");return n(),d("div",{class:f([o(t).b(),e==null?void 0:e.rootClassName]),ref_key:"senderRef",ref:i},[C(ee,{name:"header-slide"},{default:_(()=>[c.value?(n(),d("div",{key:0,class:f([o(t).b("header")])},[h(p.$slots,"header",{},void 0,!0)],2)):S("",!0)]),_:3}),T("div",{class:f(g.value)},[e.variants==="default"?(n(),d(R,{key:0},[o(w).prefix?(n(),d("div",{key:0,class:f([o(t).b("prefix")])},[h(p.$slots,"prefix",{},void 0,!0)],2)):S("",!0),C(j,{ref_key:"inputRefDefault",ref:y,modelValue:r.value,"onUpdate:modelValue":D[0]||(D[0]=G=>r.value=G),placeholder:e==null?void 0:e.placeholder,disabled:e==null?void 0:e.disabled,autosize:"",resize:"none",type:"textarea",readonly:(e==null?void 0:e.readonly)||(e==null?void 0:e.loading),class:f(a.value),style:E({...(O=e==null?void 0:e.styles)==null?void 0:O.input}),submitType:e==null?void 0:e.submitType,onInput:B,onKeypress:V},null,8,["modelValue","placeholder","disabled","readonly","class","style","submitType"]),o(w).actionsList?(n(),d("div",{key:1,class:f([o(t).b("actionsList")])},[h(p.$slots,"actionsList",{},void 0,!0)],2)):e!=null&&e.loading?(n(),d("div",{key:2,class:f([o(t).b("actionsList")])},[C(J,{circle:"",type:"primary",disabled:!r.value},{default:_(()=>[C(U,{color:"white",size:"32"},{default:_(()=>[C(de)]),_:1})]),_:1},8,["disabled"])],2)):(n(),d("div",{key:3,class:f([o(t).b("actionsList-default")])},[C(Y,{circle:"",type:"primary",disabled:(e==null?void 0:e.disabled)||!r.value},{default:_(()=>[C(X,null,{default:_(()=>[C(Q,{onClick:b})]),_:1})]),_:1},8,["disabled"])],2))],64)):(n(),d(R,{key:1},[C(j,{ref_key:"inputRefupDown",ref:k,modelValue:r.value,"onUpdate:modelValue":D[1]||(D[1]=G=>r.value=G),placeholder:e==null?void 0:e.placeholder,disabled:e==null?void 0:e.disabled,autosize:"",resize:"none",type:"textarea",readonly:(e==null?void 0:e.readonly)||(e==null?void 0:e.loading),class:f(a.value),style:E({...(K=e==null?void 0:e.styles)==null?void 0:K.input}),submitType:e==null?void 0:e.submitType,onInput:B,onKeypress:V},null,8,["modelValue","placeholder","disabled","readonly","class","style","submitType"]),T("div",tt,[T("div",{class:f([o(t).b("prefix")])},[h(p.$slots,"prefix",{},void 0,!0)],2),o(w).actionsList?(n(),d("div",{key:0,class:f([o(t).b("actionsList")])},[h(p.$slots,"actionsList",{},void 0,!0)],2)):e!=null&&e.loading?(n(),d("div",{key:1,class:f([o(t).b("actionsList")])},[C(J,{circle:"",type:"primary",disabled:!r.value},{default:_(()=>[C(U,{color:"white",size:"32"},{default:_(()=>[C(de)]),_:1})]),_:1},8,["disabled"])],2)):(n(),d("div",{key:2,class:f([o(t).b("actionsList-default")])},[C(Y,{circle:"",type:"primary",disabled:(e==null?void 0:e.disabled)||!r.value},{default:_(()=>[C(X,null,{default:_(()=>[C(Q,{onClick:b})]),_:1})]),_:1},8,["disabled"])],2))])],64))],2),C(ee,{name:"header-slide"},{default:_(()=>[$.value?(n(),d("div",{key:0,class:f([o(t).b("footer")])},[h(p.$slots,"footer",{},void 0,!0)],2)):S("",!0)]),_:3})],2)}}}),ct=F(lt,[["__scopeId","data-v-0d237e86"]]);function vt(s){const{lang:u="zh-CN",continuous:l=!0,interimResults:t=!0,onError:e,onStart:i,onEnd:c,onResult:y}=s,k=N(""),$=N(!1),v=N(null),w=()=>{"webkitSpeechRecognition"in window?(v.value=new webkitSpeechRecognition,v.value.continuous=l,v.value.interimResults=t,v.value.lang=u,v.value.onstart=()=>{$.value=!0,k.value="",i==null||i()},v.value.onend=()=>{$.value=!1,c==null||c(k.value)},v.value.onerror=g=>{$.value=!1,e==null||e(g)},v.value.onresult=g=>{let m="";for(let B=0;B<g.resultIndex+1;B++)m+=g.results[B][0].transcript;k.value=m,y==null||y(m)},v.value.start()):xe.error("当前浏览器不支持语音识别")},a=()=>{v.value&&v.value.stop()};return me(()=>{a(),v.value=null}),{start:w,stop:a,value:k,loading:$}}const at=`

`,nt=`
`,ce=":",te=s=>(s??"").trim()!=="";function ot(){let s="";return new TransformStream({transform(u,l){s+=u,console.log("buffer",s);const t=s.split(at);console.log("parts",t),t.slice(0,-1).forEach(e=>{te(e)&&l.enqueue(e)}),s=t[t.length-1]},flush(u){te(s)&&u.enqueue(s)}})}function st(){return new TransformStream({transform(s,u){const l=s.split(nt).reduce((t,e)=>{const i=e.indexOf(ce);if(i===-1)throw new Error(`键值分隔符 "${ce}" 在sse行块中找不到!`);const c=e.slice(0,i);if(!te(c))return t;const y=e.slice(i+1);return{...t,[c]:y}},{});Object.keys(l).length!==0&&u.enqueue(l)}})}function ft(){const s=N([]),u=N(null),l=N(!1),t=ae(null),e=ae(null);return{startStream:async i=>{const{readableStream:c}=i;l.value=!0,u.value=null,s.value=[],t.value=new AbortController;const y=new TextDecoderStream;e.value=c.pipeThrough(y).pipeThrough(ot()).pipeThrough(st()),e.value[Symbol.asyncIterator]=async function*(){var k;const $=this.getReader();for(;;){if((k=t.value.signal)!=null&&k.aborted){await $.cancel();break}const{done:v,value:w}=await $.read();if(v)break;w&&(yield w)}};try{for await(const k of e.value)s.value.push(k)}catch(k){k instanceof Error&&(u.value=k)}finally{l.value=!1,e.value=null,t.value=null}},cancel:()=>{t.value&&t.value.abort()},data:s,error:u,isLoading:l}}export{vt as C,ft as _,dt as a,ct as d,qe as k,oe as l,se as s,ut as x};
